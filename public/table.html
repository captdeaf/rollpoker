<!DOCTYPE html>
<html>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <head>
    <link rel="stylesheet" type="text/css" href="/poker.css" />
    <link rel="stylesheet" type="text/css" href="/seats.css" />
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>
    <script type="text/javascript" src="/underscore-min.js"></script>
    <script type="text/javascript" src="/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="/tablerender.js"></script>
    <script type="text/javascript" src="/signup.js"></script>
    <script type="text/javascript" src="/events.js"></script>
    <script type="text/javascript" src="/poker.js"></script>
  </head>
  <script type="text/template" id="maintable">
    <div class="pokertable">
    <% for (var seat in table.Seats) { var player = players[table.Seats[seat]]; %>
      <div class="playerinfo <%= seat %> <%= player.State %>">
        <div class="playername"><%= player.DisplayName %><tt class="cash"><%= player.Chips %></tt></div>
        <div class="playerpiles"><%= TableRenderer.ChipStack(player.Chips) %></div>
        <div class="playerstate"><%= player.State %></div>
        <div class="playerhand hand">
        <% _.each(player.Hand, function(cardval) { %>
          <div class="card <%= cardval %>"></div>
        <% }); %>
        </div>
      </div>
      <% if (player.Bet > 0) { %>
        <div class="<%= seat %>bet playerbet"><%= TableRenderer.ChipStack(player.Bet) %><tt class="betamt"><%= player.Bet %></tt></div>
      <% } %>
    <% } %>
    <% if (table.Pot > 0) { %>
      <div class="pot"><%= TableRenderer.ChipStack(table.Pot) %><tt class="betamt"><%= table.Pot %></tt></div>
    <% } %>
    <% if (table.Cards.board) { %>
      <div class="board">
      <% _.each(table.Cards.board, function(cardval) { %>
        <div class="card <%= cardval %>"></div>
      <% }); %>
      </div>
    <% } %>
    </div>
  </script>
  <script type="text/template" id="tableview">
    <div id="tables"></div>
    <div class="GameButtons">
      <button class="gamecommand" name="Bet", data-amount="50">Bet 50</button>
      <button class="gamecommand" name="Call">Call</button>
      <button class="gamecommand" name="Fold">Fold</button>
      <button class="gamecommand" name="Check">Check</button>
    </div>
  </script>
  <script type="text/template" id="signupview">
    <h3>Players currently involved:</h3>
    <div id="signups">
    </div>
    <div class="invites" style="width: 400px; padding: 0.5em; border: 1px solid black;">
    <form id="joingameform">
      <input type="text" name="DisplayName" placeholder="Display Name" value=""><br>
      <input type="text" name="Email" placeholder="Email Address" value=""><br><i>We only use an email address once, to send an invite link to, it is never saved.</i><br>
      <button id="joingame">Send Invitation to Email</button>
    </form>
    </div>
    <button id="leavegame" class="gamebutton">Leave the Game</button>
    <button id="startgame" class="gamebutton">Start the Game!</button>
  </script>
  <script type="text/template" id="signuplist">
    <ul>
    <% for (var pid in Players) { var pl = Players[pid]; %>
      <li id="<%= pid %>">
      <div class="playername"><%= pl.DisplayName %><% if (Poker.PLAYER_ID == pid) { %> (You!)<% } %></div>
      </li>
    <% } %>
    </ul>
  </script>
  <body>
  </body>
</html>
